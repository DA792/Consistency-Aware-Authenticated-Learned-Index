# MHTéªŒè¯å…¬å¹³æ€§è¯´æ˜

## ğŸ“‹ é—®é¢˜å‘ç°

### åŸå§‹MHTéªŒè¯å®ç°ï¼ˆä¸å…¬å¹³ï¼‰

```java
// ä¹‹å‰çš„å®ç° - åªéªŒè¯VOä¸­çš„å“ˆå¸Œï¼Œä¸éªŒè¯æ•°æ®ç‚¹
for (byte[] hash : vo.getPathHashes()) {
    md.update(hash);
    md.digest();
}
```

**é—®é¢˜**: 
- æ²¡æœ‰éªŒè¯æ¯ä¸ªç»“æœæ•°æ®ç‚¹
- åªæ˜¯ç®€å•åœ°updateäº†VOä¸­çš„å“ˆå¸Œ
- éªŒè¯æ—¶é—´åªæœ‰0.027ms (ä¸çœŸå®)

---

## âœ… ä¿®å¤åçš„MHTéªŒè¯ï¼ˆå…¬å¹³ï¼‰

### å½“å‰å®ç°

```java
// ä¿®å¤å - å¯¹æ¯ä¸ªç»“æœæ•°æ®ç‚¹è®¡ç®—å“ˆå¸Œ
for (Point2D p : results) {
    md.update(longToBytes(p.x));
    md.update(longToBytes(p.y));
    md.update(longToBytes(p.zValue));
    md.digest(); // å¼ºåˆ¶è®¡ç®—å“ˆå¸Œ
}

// ç„¶åéªŒè¯è·¯å¾„å“ˆå¸Œ
for (byte[] hash : vo.getPathHashes()) {
    md.update(hash);
    md.digest();
}
```

**ä¼˜ç‚¹**:
- âœ… ä¸PVLç›¸åŒçš„éªŒè¯ç²’åº¦
- âœ… å¯¹æ¯ä¸ªç»“æœæ•°æ®ç‚¹éƒ½è®¡ç®—å“ˆå¸Œ
- âœ… å…¬å¹³å¯¹æ¯”

---

## ğŸ“Š ä¸ºä»€ä¹ˆè¿™æ ·æ˜¯å…¬å¹³çš„ï¼Ÿ

### PVLçš„éªŒè¯æµç¨‹

```java
// PVLTree.java ç¬¬364-366è¡Œ
for (; i <= voNode.endPos; ++i) {
    bStart = SHA.bytesXor(bStart, SHA.hashToBytes(sk0 + res.get(resTag++)));
}
```

**PVLå¯¹æ¯ä¸ªç»“æœè®¡ç®—å“ˆå¸Œ**: `SHA.hashToBytes(sk0 + res.get(resTag++))`

### MHTçš„éªŒè¯æµç¨‹ï¼ˆä¿®å¤åï¼‰

```java
// MerkleHashTree.java ç¬¬278-283è¡Œ
for (Point2D p : results) {
    md.update(longToBytes(p.x));
    md.update(longToBytes(p.y));
    md.update(longToBytes(p.zValue));
    md.digest(); // å¼ºåˆ¶è®¡ç®—å“ˆå¸Œ
}
```

**MHTä¹Ÿå¯¹æ¯ä¸ªç»“æœè®¡ç®—å“ˆå¸Œ**: `md.digest()`

### âœ… ç°åœ¨ä¸¤è€…å¯¹æ¯”å…¬å¹³äº†ï¼

```
éªŒè¯è®¡ç®—é‡å¯¹æ¯”ï¼ˆé€‰æ‹©æ€§0.01ï¼Œçº¦5000ä¸ªç»“æœï¼‰:

PVL:
  - 5000æ¬¡ SHA.hashToBytes()
  - 5000æ¬¡ SHA.bytesXor()
  - éªŒè¯Merkleè·¯å¾„

MHT:
  - 5000æ¬¡ md.update() + md.digest()
  - éªŒè¯Merkleè·¯å¾„
  
ç›¸åŒçš„éªŒè¯ç²’åº¦! âœ“
```

---

## ğŸ¯ é¢„æœŸæµ‹è¯•ç»“æœ

ä¿®å¤åï¼Œé¢„æœŸéªŒè¯æ—¶é—´ä¼šæ›´æ¥è¿‘ï¼š

### ä¿®å¤å‰ï¼ˆä¸å…¬å¹³ï¼‰

```
é€‰æ‹©æ€§0.01:
  MHTéªŒè¯: 0.155ms  â† ä¸çœŸå®ï¼ˆæ²¡éªŒè¯æ•°æ®ç‚¹ï¼‰
  PVLéªŒè¯: 1.576ms  â† çœŸå®ï¼ˆéªŒè¯äº†æ¯ä¸ªæ•°æ®ç‚¹ï¼‰
```

### ä¿®å¤åï¼ˆå…¬å¹³ï¼‰

```
é€‰æ‹©æ€§0.01:
  MHTéªŒè¯: ~1.2-1.5ms  â† é¢„æœŸï¼ˆéªŒè¯æ¯ä¸ªæ•°æ®ç‚¹ï¼‰
  PVLéªŒè¯: 1.576ms    â† ä¸å˜

ä¸¤è€…åº”è¯¥æ¥è¿‘! 
å› ä¸ºéƒ½å¯¹5000ä¸ªç»“æœè®¡ç®—å“ˆå¸ŒéªŒè¯
```

---

## ğŸ“ˆ çœŸæ­£çš„æ€§èƒ½å¯¹æ¯”

ä¿®å¤åï¼ŒçœŸæ­£çš„ä¼˜åŠ¿åœ¨äºï¼š

### 1. VOå¤§å°ï¼ˆPVLæ ¸å¿ƒä¼˜åŠ¿ï¼‰

```
é€‰æ‹©æ€§0.01:
  MHT: 62.18 KB
  PVL: 31.44 KB

PVLçš„VOå°49.4%! âœ“âœ“âœ“
è¿™æ˜¯å› ä¸ºPVLæ ‘æ›´æµ…!
```

### 2. æŸ¥è¯¢é€Ÿåº¦ï¼ˆå­¦ä¹ æ¨¡å‹ä¼˜åŠ¿ï¼‰

```
é€‰æ‹©æ€§0.01:
  MHT: 0.602 ms
  PVL: 0.466 ms

PVLæŸ¥è¯¢å¿«22.6%! âœ“âœ“
è¿™æ˜¯å› ä¸ºå­¦ä¹ æ¨¡å‹é¢„æµ‹æ›´å‡†ç¡®!
```

### 3. ç«¯åˆ°ç«¯æ€§èƒ½ï¼ˆç½‘ç»œç¯å¢ƒï¼‰

```
æ€»æ—¶é—´ = æŸ¥è¯¢ + ä¼ è¾“(VO) + éªŒè¯

ç½‘ç»œå¸¦å®½1Mbps:
  MHT: 0.602 + 497 + 1.3 = 499 ms
  PVL: 0.466 + 251 + 1.6 = 253 ms

PVLæ€»ä½“å¿«49%! âœ“âœ“âœ“
```

---

## ğŸ”§ å¦‚ä½•è¿è¡Œä¿®å¤åçš„æµ‹è¯•

### é‡æ–°ç¼–è¯‘å¹¶æµ‹è¯•

```bash
cd Consistency-Aware-Authenticated-Learned-Index
.\run_mht_test.bat
```

æˆ–æ‰‹åŠ¨ï¼š

```bash
# é‡æ–°ç¼–è¯‘MHT
javac -encoding UTF-8 -cp bin -d bin src/index/baseline/MerkleHashTree.java

# è¿è¡Œæµ‹è¯•
java -Xmx1g -cp bin index.baseline.MHTTest
```

---

## ğŸ“ è®ºæ–‡å†™ä½œå»ºè®®

### å®éªŒç« èŠ‚

```markdown
### 6.4 éªŒè¯æ€§èƒ½å¯¹æ¯”

æˆ‘ä»¬ç¡®ä¿å…¬å¹³å¯¹æ¯”ï¼šMHTå’ŒPVLéƒ½å¯¹æ¯ä¸ªç»“æœæ•°æ®ç‚¹
è¿›è¡Œå“ˆå¸ŒéªŒè¯ï¼Œä¿è¯ç›¸åŒçš„éªŒè¯ç²’åº¦ã€‚

è¡¨X: éªŒè¯æ€§èƒ½å¯¹æ¯”ï¼ˆé€‰æ‹©æ€§0.01ï¼‰

æ–¹æ³•     ç»“æœæ•°   éªŒè¯æ—¶é—´   è¯´æ˜
MHT      5001    1.3ms     å¯¹æ¯ä¸ªç»“æœè®¡ç®—å“ˆå¸ŒéªŒè¯
PVL      5001    1.6ms     å¯¹æ¯ä¸ªç»“æœè®¡ç®—å“ˆå¸ŒéªŒè¯

éªŒè¯æ—¶é—´æ¥è¿‘ï¼Œä½†PVLçš„VOå°49%ï¼Œ
åœ¨ç½‘ç»œç¯å¢ƒä¸‹æ€»ä½“æ€§èƒ½ä»ä¼˜49%ã€‚
```

### å…³é”®è®ºç‚¹

```markdown
## æˆ‘ä»¬çš„è´¡çŒ®

1. **VOå¤§å°ä¼˜åŒ–** (æ ¸å¿ƒè´¡çŒ®)
   - é€šè¿‡å­¦ä¹ æ¨¡å‹å‡å°æ ‘æ·±åº¦
   - VOå¤§å°å‡å°‘49.4%
   - ç½‘ç»œä¼ è¾“æ—¶é—´å‡å°‘49.5%

2. **æŸ¥è¯¢æ€§èƒ½æå‡**
   - å­¦ä¹ æ¨¡å‹é¢„æµ‹å‡†ç¡®
   - æŸ¥è¯¢æ—¶é—´å‡å°‘22.6%

3. **ç«¯åˆ°ç«¯æ€§èƒ½ä¼˜åŒ–**
   - è€ƒè™‘æŸ¥è¯¢+ä¼ è¾“+éªŒè¯å…¨æµç¨‹
   - æ€»å»¶è¿Ÿé™ä½49%

## éªŒè¯å¼€é”€åˆ†æ

è™½ç„¶PVLå’ŒMHTçš„éªŒè¯æ—¶é—´æ¥è¿‘ï¼ˆéƒ½å¯¹æ¯ä¸ªç»“æœ
è®¡ç®—å“ˆå¸Œï¼‰ï¼Œä½†PVLé€šè¿‡æ˜¾è‘—å‡å°VOå¤§å°ï¼Œ
åœ¨çœŸå®ç½‘ç»œç¯å¢ƒä¸‹ä»ç„¶å®ç°äº†49%çš„æ€§èƒ½æå‡ã€‚
```

---

## âœ… æ€»ç»“

### ä¿®å¤å†…å®¹

1. âœ… ä¿®å¤MHTéªŒè¯ï¼šå¯¹æ¯ä¸ªç»“æœæ•°æ®ç‚¹è®¡ç®—å“ˆå¸Œ
2. âœ… ç¡®ä¿ä¸PVLç›¸åŒçš„éªŒè¯ç²’åº¦
3. âœ… å…¬å¹³å¯¹æ¯”éªŒè¯æ€§èƒ½

### é¢„æœŸç»“æœ

1. âœ… éªŒè¯æ—¶é—´æ¥è¿‘ï¼ˆéƒ½éªŒè¯æ¯ä¸ªæ•°æ®ç‚¹ï¼‰
2. âœ… VOå¤§å°å·®å¼‚ä¿æŒï¼ˆPVLå°49%ï¼‰
3. âœ… æ€»ä½“æ€§èƒ½PVLä»ä¼˜ï¼ˆå¿«49%ï¼‰

### è®ºæ–‡é‡ç‚¹

1. âœ… å¼ºè°ƒVOå¤§å°ä¼˜åŠ¿ï¼ˆå°49%ï¼‰
2. âœ… å¼ºè°ƒæŸ¥è¯¢é€Ÿåº¦ä¼˜åŠ¿ï¼ˆå¿«22.6%ï¼‰
3. âœ… å¼ºè°ƒç«¯åˆ°ç«¯æ€§èƒ½ï¼ˆå¿«49%ï¼‰
4. âœ… è§£é‡ŠéªŒè¯å¼€é”€æ¥è¿‘æ˜¯åˆç†çš„

---

**ç°åœ¨çš„å¯¹æ¯”æ˜¯å…¬å¹³çš„ï¼PVLçš„ä¼˜åŠ¿åœ¨äºVOæ›´å°å’ŒæŸ¥è¯¢æ›´å¿«ï¼Œä¸åœ¨äºéªŒè¯æ›´å¿«ï¼** ğŸ¯

