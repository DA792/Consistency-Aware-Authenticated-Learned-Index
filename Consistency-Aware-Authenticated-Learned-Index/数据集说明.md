# 大规模二维空间数据集

## 📦 数据集列表

### 均匀分布数据集

| 文件名 | 数据点数 | 分布类型 | 坐标范围 | 文件大小(约) |
|--------|---------|---------|---------|------------|
| `uniform_500k.csv` | 50万 | 均匀分布 | [0, 999999] × [0, 999999] | ~10 MB |
| `uniform_750k.csv` | 75万 | 均匀分布 | [0, 999999] × [0, 999999] | ~15 MB |
| `uniform_1000k.csv` | 100万 | 均匀分布 | [0, 999999] × [0, 999999] | ~20 MB |

### 特殊分布数据集

| 文件名 | 数据点数 | 分布类型 | 特点 |
|--------|---------|---------|------|
| `gaussian_1000k.csv` | 100万 | 高斯分布 | 中心聚集,边缘稀疏 |
| `clustered_1000k.csv` | 100万 | 簇状分布 | 10个簇,模拟真实场景 |

## 🚀 如何生成数据集

### 方法1: 使用批处理脚本 (推荐)

```batch
generate_datasets.bat
```

这会自动生成所有5个数据集。

### 方法2: 手动编译运行

```batch
cd Consistency-Aware-Authenticated-Learned-Index

# 编译
javac -encoding UTF-8 -cp "jars/*" -d bin src/utils/DataGenerator.java src/utils/Point2D.java

# 运行
java -cp "jars/*;bin" utils.DataGenerator
```

## 📊 数据格式

所有数据集都是CSV格式:

```csv
x,y
123456,789012
234567,890123
...
```

- **第一行**: 列名 (x,y)
- **后续行**: 数据点坐标 (x坐标,y坐标)

## ⏱️ 生成时间

| 数据集 | 预计生成时间 |
|--------|------------|
| 50万点 | ~10-20秒 |
| 75万点 | ~15-30秒 |
| 100万点 | ~20-40秒 |
| 全部5个 | ~1-2分钟 |

*时间取决于您的硬盘速度*

## 🎯 数据分布说明

### 1. 均匀分布 (Uniform)

```
特点: 数据点在整个空间中均匀分布
适用: 测试索引的平均性能
```

### 2. 高斯分布 (Gaussian)

```
特点: 数据点集中在中心区域,呈正态分布
中心: (500000, 500000)
标准差: 150000
适用: 测试数据密集区域的性能
```

### 3. 簇状分布 (Clustered)

```
特点: 数据点分成10个簇,每个簇内部密集
簇数: 10个
适用: 模拟真实场景 (如城市POI分布)
```

## 📈 使用数据集进行测试

### 测试50万点数据集

```java
String dataPath = "src/data/uniform_500k.csv";
int loadCount = 500000;
List<Point2D> points = DataLoader.loadFromCSV(dataPath, loadCount);

Spatial2DPVLTree tree = new Spatial2DPVLTree(points, 64);
```

### 测试100万点数据集

```java
String dataPath = "src/data/uniform_1000k.csv";
int loadCount = 1000000;
List<Point2D> points = DataLoader.loadFromCSV(dataPath, loadCount);

Spatial2DPVLTree tree = new Spatial2DPVLTree(points, 128);  // 更大的err
```

## 💡 性能建议

### 不同数据规模的推荐配置

| 数据点数 | 推荐err | 预期构建时间 | 预期查询时间 |
|---------|---------|------------|------------|
| 50万 | 64 | ~3-5秒 | ~5-10 ms |
| 75万 | 64-128 | ~5-8秒 | ~8-15 ms |
| 100万 | 128 | ~8-12秒 | ~10-20 ms |

### 优化建议

**对于大规模数据集 (≥50万点)**:

1. **增大误差界限**
   ```java
   int err = 128;  // 或更大
   ```

2. **减少Z区间数量**
   ```java
   // ZOrderDecomposition.java 已优化
   if (level >= 10 || (zEnd - zStart) <= 1) {
   ```

3. **增加内存**
   ```batch
   java -Xmx4g -cp "jars/*;bin" ...
   ```

## 🔍 验证数据集

生成后,可以检查数据集:

```java
// 加载并分析数据
List<Point2D> points = DataLoader.loadFromCSV("src/data/uniform_1000k.csv", 1000000);
DataLoader.DataStats stats = DataLoader.analyzeData(points);
System.out.println(stats);
```

输出示例:
```
数据统计: 1000000 个点
X范围: [0, 999999]
Y范围: [0, 999999]
```

## 📁 文件位置

所有数据集保存在:
```
Consistency-Aware-Authenticated-Learned-Index/
  └── src/
      └── data/
          ├── uniform_500k.csv
          ├── uniform_750k.csv
          ├── uniform_1000k.csv
          ├── gaussian_1000k.csv
          └── clustered_1000k.csv
```

## 🎉 开始使用

1. **生成数据集**:
   ```batch
   generate_datasets.bat
   ```

2. **等待完成** (约1-2分钟)

3. **使用数据集测试**:
   ```batch
   # 修改测试代码使用新数据集
   # 然后运行
   run_2d_pvl_test.bat
   ```

## ⚠️ 注意事项

1. **磁盘空间**: 确保有至少 100 MB 的可用空间
2. **内存**: 加载100万点需要约 200-300 MB 内存
3. **生成时间**: 首次生成可能较慢,请耐心等待
4. **随机种子**: 使用固定种子(42),保证数据可重复生成

## 🔧 自定义数据集

如果需要自定义数据集,可以修改 `DataGenerator.java`:

```java
// 自定义数据点数量
generateUniformData(2000000, 999999, 999999, "src/data/custom_2000k.csv");

// 自定义坐标范围
generateUniformData(1000000, 1000000, 1000000, "src/data/custom_range.csv");

// 自定义簇数量
generateClusteredData(1000000, 20, 999999, 999999, "src/data/custom_20clusters.csv");
```

## 📊 性能基准测试

使用这些数据集进行性能测试,可以评估:

- ✅ 索引构建时间
- ✅ 查询响应时间
- ✅ 验证时间
- ✅ VO大小
- ✅ 内存占用
- ✅ 可扩展性

祝测试顺利! 🚀









